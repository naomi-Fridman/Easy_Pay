
<div class="ad-sektion-top hidden-xs" style="margin-top:80px;">
    <div class="container-fluid text-center">
        <div class="row">
        </div>
    </div>
</div>
<div id="top-filter" class="top-filter tfilter-box hidden-xs" data-spy="affix" data-offset-top="197">
    <div class="container">
        <div class="row">
            
            <div class="col-sm-2">
                <div class="row">
                    <div class="col-md-12">
                        <input [(ngModel)]="dtoPayments.firstName" #firstNameInput class="form-control" placeholder="שם פרטי" type="text">
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="row">
                    <div class="col-md-12">
                        <input [(ngModel)]="dtoPayments.lastName" #lastNameInput class="form-control" placeholder="שם משפחה" type="text">
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <select (change)="onChange($event.target.value)"[(ngModel)]="selectedSum" class="form-control" >

                    <option value="sum" >
                        סכום מדויק
                    </option>
                    <option value="from">
                        החל מ
                    </option>
                    <option value="till">
                        עד 
                    </option>
                    <option value="range" >
                        טווח
                    </option>
                </select>
            </div>
            <div  *ngIf="selectedSum=='from' || selectedSum=='range'" class="col-sm-2">
                <div class="row">
                    <div class="col-md-12">
                        <input [(ngModel)]="dtoPayments.collectionSumFrom" #fromSumInput class="form-control" placeholder=" החל מ" type="text">
                    </div>
                </div>
            </div>
            <div *ngIf="selectedSum=='till' || selectedSum=='range' " class="col-sm-2">
                <div class="row">
                    <div class="col-md-12">
                        <input [(ngModel)]="dtoPayments.collectionSumTill" #tillSumInput class="form-control" placeholder="עד" type="text">
                    </div>
                </div>
            </div>
            <div *ngIf="selectedSum=='sum'" class="col-sm-2">
                <div class="row">
                    <div class="col-md-12">
                        <input  [(ngModel)]="dtoPayments.collectionSumExact" #sumInput class="form-control" placeholder=" סכום" type="text" >
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <select (change)="onChange($event.target.value)"[(ngModel)]="selectedDate" class="form-control" >
                    <option value="exactD" >
                        תאריך מדויק
                    </option>
                    <option value="fromD">
                        החל מ
                    </option>
                    <option value="tillD">
                        עד 
                    </option>
                    <option value="rangeD" >
                        טווח
                    </option>
                </select>
            </div>
            <div  *ngIf="selectedDate=='fromD' || selectedDate=='rangeD'" class="col-sm-2">
                <div class="row">

                    <p-calendar [(ngModel)]="dateValue" [(ngModel)]="dtoPayments.dateFrom"  #fromDateInput   dateFormat="dd/mm/yy" showButtonBar="true"></p-calendar>
                </div>
            </div>
            <div *ngIf="selectedDate=='tillD' || selectedDate=='rangeD' " class="col-sm-2">
                <div class="row">
                    <p-calendar [(ngModel)]="dateValue" [(ngModel)]="dtoPayments.dateFrom"  #tillDateInput   dateFormat="dd/mm/yy" showButtonBar="true"></p-calendar>

                </div>
            </div>
            <div *ngIf="selectedDate=='sum'" class="col-sm-2">
                <div class="row">
                    <p-calendar [(ngModel)]="dateValue" [(ngModel)]="dtoPayments.dateExact"  #exactDateInput   dateFormat="dd/mm/yy" showButtonBar="true"></p-calendar>

                </div>
            </div>
            <div class="col-sm-4">
                <button type="button" class="btn btn-danger glyphicon glyphicon-search"
                    (click)="getAllPayments()">חפש </button>
            </div>
        </div>
    </div>
</div>


<div class="l-container">
    <ul style="padding-right: 0px" *ngFor="let payment of paymentListToDisplay">
        <li class="list" data-name="JoeBrown">
            <div class="list__profile">
                <img class="pull-left img-circle nav-user-photo" width="90"
                    src="../../../assets/img//faces/face-0.jpg" />  
                <div class="list__label">
                    <div class="list__label--header">  {{payment.user.firstName}}  {{payment.user.lastName}} </div>
                    <div class="list__label--value"> סכום  - {{payment.payment.collectionSum}}  </div>
                    <div class="list__label--value"> תאריך  - {{payment.payment.paymentDate | date:"dd/MM/yyyy" }}   </div>
                </div>
                <div >
                    <button class='searchBtn' type="button" data-toggle="modal" data-target="#myModal" (click)="showDetails(payment)">ערוך פרטים </button>
                    <button  href="#myModal"  class='searchBtn' type="button" (click)="showConfirm()">מחק משתמש </button>
                </div>
            </div>
        </li>
    </ul>
</div>

<div class="modal " id="myModal" tabindex="-1" role="dialog">
    <div class="modal-dialog " role="document"  >
        <div class="modal-content">
            <div  class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div style="padding-top: 17px; padding-right: 30px; padding-bottom: 0px;" class="modal-body">
                <app-payments-details [payment]="paymentUser1"></app-payments-details>
            </div>
            <div style="border-top: none;" class="modal-footer">
                <button  type="button" class=" searchBtn modalCancel" data-dismiss="modal"  (click)="closePopup()">
                    ביטול
                </button>
                <button  type="button" class=" searchBtn modalSaveBtn" data-dismiss="modal" (click)="deleteUser()">
                    אישור
                </button>
            </div>
        </div>
    </div>
</div>


